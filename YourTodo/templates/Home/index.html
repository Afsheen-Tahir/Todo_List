{% extends "base.html" %}
{% load static %}
{% block title %}
Home
{% endblock  %}
{% block style %}
<link rel="stylesheet" href={% static "Home/style.css" %}>
{% endblock  %}
{% block content  %}
<div class="container-fluid">
    <div class="row">  
     {%if messages%}
      {% for message in messages %}
       <div class="alert alert-warning">
      {{ message }}
    </div>
      {% endfor %}
{% endif %}
        {% if TodoList %}
        {% for Todo in TodoList%}
        
        <div class="col-lg-3 col-sm-6 col-12 mt-3 mt-md-1">
            <div class="card transition mt-3  h-100 w-100">
                <div class="card-header blues text-white d-flex justify-content-between align-items-center" >
                    {{Todo.Title}} 
                  {% if user.is_authenticated %}
                    <a  href="{% url 'Delete' Todo.id %}" onclick="return confirm('Do you wanna delete')" ><i class="text-start fa-solid fa-circle-minus"></i>
                    </a> 
                    {% else %}
                      <span>(Guest - no delete)</span>
    {% endif %}

                </div>
                <div class="card-body">
                    <p class="card-text mb-3">{{Todo.Description}}</p>
                    <p>
               
                    <span> <strong>Status:</strong>
       {% if Todo.Isdone %}Completed
       {% else %}Pending
       {% endif %}</span>
{% if user.is_authenticated %}

                    <p><strong>Created At: </strong> &nbsp; {{Todo.created_date}}</p>
                    <p><strong>Priority :</strong> &nbsp;{{Todo.priority}}</p>
                    <p><strong>Updates :</strong> &nbsp;{{Todo.updated_at}}</p>
                    <hr>
                    <span><strong>Due Date: </strong> &nbsp; {{Todo.due_date}}

                    {% endif %}
                    {% if user.is_authenticated %}
                    <a href="{% url 'update' Todo.id %}" class="update btn btn-success p-2 my-2 d-block">Update</a>
                    {% else %}
                    <span> No Update avaible </span>
                    {% endif %}
            
  </div>
            </div>  </div>
            {%endfor%}
            {% else %}
            <h2 class="pt-3" style="color: rgba(21, 76, 121, 0.85)">Add Your ToDo</h2>
            {%endif%}
    </div>
</div>


<div class="modal fade" id="addTodoModal" tabindex="-1" aria-labelledby="addTodoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="addTodoModalLabel">Add New Todo</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body (Form) -->
      <div class="modal-body">
        <form method="POST" action="{% url 'Add' %}">
          {% csrf_token %}
          {{ Formdata.as_p }}
          <button type="submit" class="btn btn-success">Save Todo</button>
        </form>
      </div>

    </div>
  </div>
</div>

{% endblock  %}